<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <!--Comapny Title-->
    <title>RichardGrubbAndAssociates</title>
    <!--Links to appropriate APIs and Scripts-->
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.4.4/proj4.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css' rel='stylesheet' />
    <!--Could not get this to work-->
    <link href='https://github.com/ljagis/leaflet-measure.git'/>
    
    <style>
        /*Style set to have image cover the entire background*/
        body {
            background-size: cover;
        }
        /*Could not get this to work for customizing popup*/
        .custom.leaflet-popup-tip,
        .custom.leaflet-popup-content-wrapper {
        background: none;
        color: red;
        font-family: Impact;
        text-decoration: underline;
        text-shadow: 2px 2px black;
        font-size: 20;
        }
        header {
            position:absolute;
            left: 1%;
            top: 1%;
        }
        h1 {
            z-index: 1000;
            display: inline;
            margin-right: 10px;
            color: whitesmoke;
            font-family: Garamond;
            font-size: 60pt;
        }
        h2 {
            z-index: 2000;
            display: inline-block;
            color:whitesmoke;
            font-size: 30pt;
            padding-bottom: 5%;
        }
        h3 {
            display: inline-block;
            color:whitesmoke;
            font-size: 20pt;
        }
        #map {
            padding-top: 5%;
            width: 48%;
            height: 900px;
            top: 100px;
            left: 20px ;
            background: #710F11;
            border-style: groove;
            border-radius: 1%;
            border-color: gray;
            position: relative;
            float:left;
            padding-right: 20px;
            z-index: 999;
            position:relative;
        }
        #projSelect {
            top: 100px;
            float:right; 
            z-index: 999; 
            padding-top: 100px; 
            padding-bottom: 1%; 
            padding-left: 5%; 
            padding-right: 5%;
            position: relative; 
            width: 30%; 
            height: 20%;
        }
        p {
            font-size: 1em;
            color: #001323;
        }
        #headerRight {
            padding-left: 10px;
            z-index: 999;
            position:relative;
            right:10px;
            text-decoration: underline;
            float: top;
        }
        #my-dropdown {
            padding-top: 10px;
            left:10px;
            height: 40px;
            width: 220px;
            font-family:Garamond;
            z-index: 750; 
            font-size: 20px;
            float: center;
        }
        #butt {
            padding-top: 10px;
            right: 10px;
            height: 40px;
            width: 200px; 
            font-family: Garamond; 
            z-index:999;
            font-size: 20px;
            float: center;
        }
        #legend {
            float: bottom;
            padding-top: 10px; 
            width: 48%; 
            z-index: 1000;
            position: relative;
            width: 100%;
        }
        
    </style>
</head>
<body background= "Symbols/background.jpg"; ,style= background-size: cover;>
    <header>
    <h1 >RGA, Inc.</h1>
    <h2 >Inventoried Archaeological Projects</h2>
    </header>
    
    <div id='map'></div>
    
<!--INPUTTING THE PROJECT NUMBER-->    
<div id="projSelect">
    <h2 id= "headerRight">Select Project Code</h2>
    <select id='my-dropdown'>
<option value="">Choose Project Number</option>    
<option value="201819">2019275</option>
<option value="2017164">201819</option>
<option value="2017166">2017164</option>
<option value="2017167">2017166</option>
<option value="2017171">2017167</option>
<option value="2017173">2017171</option>
<option value="2017174">2017173</option>
<option value="2017177">2017174</option>
<option value="2017182">2017177</option>
<option value="2017185">2017182</option>
<option value="2017190">2017185</option>
<option value="2017200">2017190</option>
<option value="2017203">2017200</option>
<option value="2017206">2017203</option>
<option value="2017219">2017206</option>
<option value="2017220">2017219</option>
<option value="2017225">2017220</option>
<option value="2017226">2017225</option>
<option value="2017227">2017226</option>
<option value="2017228">2017227</option>
<option value="2017229">2017228</option>
<option value="2017232">2017229</option>
<option value="2017238">2017232</option>
<option value="2017239">2017238</option>
<option value="2018004">2017239</option>
<option value="2018024">2018004</option>
<option value="2018025">2018024</option>
<option value="2018026">2018025</option>
<option value="2018028">2018026</option>
<option value="2018034">2018028</option>
<option value="2018050">2018034</option>
<option value="2018075">2018050</option>
<option value="2018083">2018075</option>
<option value="2018085">2018083</option>
<option value="2018087">2018085</option>
<option value="2018093">2018087</option>
<option value="2018100">2018093</option>
<option value="2018101">2018100</option>
<option value="2018103">2018101</option>
<option value="2018104">2018103</option>
<option value="2018106">2018104</option>
<option value="2018111">2018106</option>
<option value="2018113">2018111</option>
<option value="2018114">2018113</option>
<option value="2018118">2018114</option>
<option value="2018122">2018118</option>
<option value="2018124">2018122</option>
<option value="2018131">2018124</option>
<option value="2018138">2018131</option>
<option value="2018139">2018138</option>
<option value="2018142">2018139</option>
<option value="2018145">2018142</option>
<option value="2018151">2018145</option>
<option value="2018158">2018151</option>
<option value="2018160">2018158</option>
<option value="2018162">2018160</option>
<option value="2018163">2018162</option>
<option value="2018165">2018163</option>
<option value="2018166">2018165</option>
<option value="2018167">2018166</option>
<option value="2018168">2018167</option>
<option value="2018169">2018168</option>
<option value="2018175">2018169</option>
<option value="2018178">2018175</option>
<option value="2018180">2018178</option>
<option value="2018181">2018180</option>
<option value="2018182">2018181</option>
<option value="2018183">2018182</option>
<option value="2018185">2018183</option>
<option value="2018186">2018185</option>
<option value="2018197">2018186</option>
<option value="2018198">2018197</option>
<option value="2018201">2018198</option>
<option value="2018202">2018201</option>
<option value="2018203">2018202</option>
<option value="2018205">2018203</option>
<option value="2018207">2018205</option>
<option value="2018208">2018207</option>
<option value="2018215">2018208</option>
<option value="2018216">2018215</option>
<option value="2018217">2018216</option>
<option value="2018219">2018217</option>
<option value="2018220">2018219</option>
<option value="2018222">2018220</option>
<option value="2018225">2018222</option>
<option value="2018228">2018225</option>
<option value="2018231">2018228</option>
<option value="2018234">2018231</option>
<option value="2018235">2018234</option>
<option value="2018236">2018235</option>
<option value="2018237">2018236</option>
<option value="2018238">2018237</option>
<option value="2018239">2018238</option>
<option value="2018240">2018239</option>
<option value="2018242">2018240</option>
<option value="2018243">2018242</option>
<option value="2018244">2018243</option>
<option value="2018249">2018244</option>
<option value="2018251">2018249</option>
<option value="2018253">2018251</option>
<option value="2018255">2018253</option>
<option value="2018256">2018255</option>
<option value="2018260">2018256</option>
<option value="2018263">2018260</option>
<option value="2018264">2018263</option>
<option value="2018267">2018264</option>
<option value="2018269">2018267</option>
<option value="2018270">2018269</option>
<option value="2018271">2018270</option>
<option value="2018272">2018271</option>
<option value="2018273">2018272</option>
<option value="2018274">2018273</option>
<option value="2019001">2018274</option>
<option value="2019002">2019001</option>
<option value="2019004">2019002</option>
<option value="2019005">2019004</option>
<option value="2019006">2019005</option>
<option value="2019007">2019006</option>
<option value="2019009">2019007</option>
<option value="2019010">2019009</option>
<option value="2019011">2019010</option>
<option value="2019012">2019011</option>
<option value="2019013">2019012</option>
<option value="2019016">2019013</option>
<option value="2019017">2019016</option>
<option value="2019018">2019017</option>
<option value="2019020">2019018</option>
<option value="2019022">2019020</option>
<option value="2019023">2019022</option>
<option value="2019024">2019023</option>
<option value="2019025">2019024</option>
<option value="2019026">2019025</option>
<option value="2019029">2019026</option>
<option value="2019030">2019029</option>
<option value="2019031">2019030</option>
<option value="2019033">2019031</option>
<option value="2019036">2019033</option>
<option value="2019037">2019036</option>
<option value="2019039">2019037</option>
<option value="2019045">2019039</option>
<option value="2019048">2019045</option>
<option value="2019053">2019048</option>
<option value="2019057">2019053</option>
<option value="2019060">2019057</option>
<option value="2019062">2019060</option>
<option value="2019065">2019062</option>
<option value="2019066">2019065</option>
<option value="2019069">2019066</option>
<option value="2019073">2019069</option>
<option value="2019075">2019073</option>
<option value="2019076">2019075</option>
<option value="2019078">2019076</option>
<option value="2019080">2019078</option>
<option value="2019081">2019080</option>
<option value="2019083">2019081</option>
<option value="2019085">2019083</option>
<option value="2019087">2019085</option>
<option value="2019088">2019087</option>
<option value="2019089">2019088</option>
<option value="2019090">2019089</option>
<option value="2019091">2019090</option>
<option value="2019092">2019091</option>
<option value="2019094">2019092</option>
<option value="2019095">2019094</option>
<option value="2019096">2019095</option>
<option value="2019100">2019096</option>
<option value="2019102">2019100</option>
<option value="2019103">2019102</option>
<option value="2019104">2019103</option>
<option value="2019107">2019104</option>
<option value="2019115">2019107</option>
<option value="2019119">2019115</option>
<option value="2019127">2019119</option>
<option value="2019128">2019127</option>
<option value="2019129">2019128</option>
<option value="2019130">2019129</option>
<option value="2019131">2019130</option>
<option value="2019133">2019131</option>
<option value="2019135">2019133</option>
<option value="2019142">2019135</option>
<option value="2019143">2019142</option>
<option value="2019144">2019143</option>
<option value="2019179">2019144</option>
<option value="2019180">2019179</option>
<option value="2019181">2019180</option>
<option value="2019186">2019181</option>
<option value="2019187">2019186</option>
<option value="2019189">2019187</option>
<option value="2019190">2019189</option>
<option value="2019195">2019190</option>
<option value="2019197">2019195</option>
<option value="2019200">2019197</option>
<option value="2019201">2019200</option>
<option value="2019205">2019201</option>
<option value="2019207">2019205</option>
<option value="2019208">2019207</option>
<option value="2019210">2019208</option>
<option value="2019211">2019210</option>
<option value="2019215">2019211</option>
<option value="2019216">2019215</option>
<option value="2019221">2019216</option>
<option value="2019225">2019221</option>
<option value="2019226">2019225</option>
<option value="2019228">2019226</option>
<option value="2019229">2019228</option>
<option value="2019236">2019229</option>
<option value="2019238">2019236</option>
<option value="2019239">2019238</option>
<option value="2019240">2019239</option>
<option value="2019242">2019240</option>
<option value="2019243">2019242</option>
<option value="2019253">2019243</option>
<option value="2019254">2019253</option>
<option value="2019257">2019254</option>
<option value="2019258">2019257</option>
<option value="2019260">2019258</option>
<option value="2019261">2019260</option>
<option value="2019262">2019261</option>
<option value="2019264">2019262</option>
<option value="2019266">2019264</option>
<option value="2019269">2019266</option>
<option value="2019270">2019269</option>
<option value="2019271">2019270</option>
</select>
    <h3>OR</h3>
    <button id="butt">Enter Project Number</button>
    <img id="legend" src= 'Symbols/legend.png'>
</div>

    
<script src="APE_WGS_03112022.json"></script>
<script src="STP_WGS_031252022.json"></script>
<script src="EU_WGS_03112022.json"></script>
<script src="Feature_WGS_03112022.json"></script>
<script>
   
    var options = {
        center: [40.15,-74.65],
        zoom:8,
        fullscreenControl: true,
        measureControl: true
    }
    
    var map = L.map('map',options)
    
   var NJ2020 = L.tileLayer.wms('https://img.nj.gov/imagerywms/Natural2020', {
    layers: 'Natural2020', maxZoom:22
});    
   var NJ2015 = L.tileLayer.wms('https://img.nj.gov/imagerywms/Natural2015?', {
    layers: 'Natural2015', maxZoom:22
});
   var NJ2012 = L.tileLayer.wms('https://img.nj.gov/imagerywms/Natural2012?', {
    layers: 'Natural2012', maxZoom:22
});
    var WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community',
    maxZoom:22
});
    var WorldStreetMap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012', maxZoom:22
});
    var NJ1930 = L.tileLayer.wms('https://img.nj.gov/imagerywms/BlackWhite1930?', {
    layers: 'BlackWhite1930', maxZoom:22
});
    var NJTidelands = L.tileLayer.wms('https://img.nj.gov/imagerywms/BlackWhite1977?', {
    layers: 'BlackWhite1977', maxZoom:22
});
    map.addLayer(NJ2020);
    
var customOptions = {'className' : 'custom'};
 
    //Shovel Test Pit Icons
var ncmIcon = L.icon({iconUrl: 'Symbols/NCM.png',iconSize: [10, 10]});
var pmIcon = L.icon({iconUrl: 'Symbols/PM.png',iconSize: [10, 10]});
var hmIcon = L.icon({iconUrl: 'Symbols/HM.png',iconSize: [10, 10]});
var hmpmIcon = L.icon({iconUrl: 'Symbols/HMPM.png',iconSize: [10, 10]});
var hmnrIcon = L.icon({iconUrl: 'Symbols/HMNR.png',iconSize: [10, 10]});
var hmpmnrIcon = L.icon({iconUrl: 'Symbols/HMPMNR.png',iconSize: [10, 10]});
var pmnrIcon = L.icon({iconUrl: 'Symbols/PMNR.png',iconSize: [10, 10]});
var neIcon = L.icon({iconUrl: 'Symbols/NE.png',iconSize: [10, 10]});
var nrIcon = L.icon({iconUrl: 'Symbols/NR.png',iconSize: [10, 10]});
var legend = L.icon({iconUrl: 'Symbols/STP LEGEND.png',iconSize: [100, 100]});

var apeLayer= L.layerGroup().addTo(map);
var stpLayer= L.layerGroup().addTo(map);
var featureLayer= L.layerGroup().addTo(map);
var euLayer= L.layerGroup().addTo(map);
    
//Event Listener Button
document.getElementById('butt')
    .addEventListener('click', function(){
    var proNum = prompt('Please enter project code as 7 digit number.');

    //The Area of Potential Effects
var ape2=L.geoJson(ape
           , {filter: function(feature,layer) {
         if (feature.properties.project==proNum) {
         return feature}},
           onEachFeature : function(feature,layer) {
    layer.bindPopup("<b>Acreage: </b>" + feature.properties.Acreage, customOptions
)}
             }).setStyle({color:"#710F11", fillOpacity:0.0}).addTo(map).addTo(apeLayer);
    map.fitBounds(ape2.getBounds());
    
    //Excavation Units
var eu2=L.geoJson(eu
           , {filter: function(feature,layer) {
         if (feature.properties.project==proNum) {
         return feature}},
           onEachFeature : function(feature,layer) {
    layer.bindPopup("<strong>" + feature.properties.Unit+"</strong><br>"+feature.properties.dimension, customOptions
)}
             }).setStyle({color:"green", fillOpacity:0.3}).addTo(map).addTo(euLayer);
    
var feat2=L.geoJson(feat
           , {filter: function(feature,layer) {
         if (feature.properties.project==proNum) {
         return feature}},
           onEachFeature : function(feature,layer) {
    layer.bindPopup("<strong>" + feature.properties.Feature+"</strong>", customOptions
)}
             }).setStyle({color:"blue", fillOpacity:0.5}).addTo(map).addTo(featureLayer);
    
    //Shovel Test Pits
var stpNcm= L.geoJson(stp, {
    pointToLayer: function(feature,latlng) {
        return L.marker(latlng, {icon: ncmIcon});
         },    
    filter: function(feature,layer) {
        if (feature.properties.project==proNum) {
    return feature.properties.Result=='NCM';
            }},    
    onEachFeature : function(feature,layer) {
    layer.bindPopup("<b>Test: </b>"+"<p>"+feature.properties.Test+"</p>"
                   +"<p>"+"Result: "+feature.properties.Result+"</p>", customOptions);
    }}).addTo(map).addTo(stpLayer);
    
var stpPm= L.geoJson(stp, {
    pointToLayer: function(feature,latlng) {
        return L.marker(latlng, {icon: pmIcon});
         },    
    filter: function(feature,layer) {
        if (feature.properties.project==proNum) {
    return feature.properties.Result=='PM';
            }},      
    onEachFeature : function(feature,layer) {
    layer.bindPopup("<b>Test: </b>"+"<p>"+feature.properties.Test+"</p>"
                   +"<p>"+"Result: "+feature.properties.Result+"</p>", customOptions);
    }}).addTo(map).addTo(stpLayer);
    
var stpHm= L.geoJson(stp, {
    pointToLayer: function(feature,latlng) {
        return L.marker(latlng, {icon: hmIcon});
         },    
    filter: function(feature,layer) {
        if (feature.properties.project==proNum) {
    return feature.properties.Result=='HM';
            }},      
    onEachFeature : function(feature,layer) {
        
    layer.bindPopup("<b>Test: </b>"+"<p>"+feature.properties.Test+"</p>"
                   +"<p>"+"Result: "+feature.properties.Result+"</p>", customOptions);
    }}).addTo(map).addTo(stpLayer);

var stpHmpm= L.geoJson(stp, {
    pointToLayer: function(feature,latlng) {
        return L.marker(latlng, {icon: hmpmIcon});
         },    
    filter: function(feature,layer) {
        if (feature.properties.project==proNum) {
    return feature.properties.Result=='HMPM';
            }},      
    onEachFeature : function(feature,layer) {
        
    layer.bindPopup("<b>Test: </b>"+"<p>"+feature.properties.Test+"</p>"
                   +"<p>"+"Result: "+feature.properties.Result+"</p>", customOptions);
    }}).addTo(map).addTo(stpLayer);

var stpHmpmnr= L.geoJson(stp, {
    pointToLayer: function(feature,latlng) {
        return L.marker(latlng, {icon: hmpmnrIcon});
         },    
    filter: function(feature,layer) {
        if (feature.properties.project==proNum) {
    return feature.properties.Result=='HMPMNR';
            }},      
    onEachFeature : function(feature,layer) {
        
    layer.bindPopup("<b>Test: </b>"+"<p>"+feature.properties.Test+"</p>"
                   +"<p>"+"Result: "+feature.properties.Result+"</p>", customOptions);
    }}).addTo(map).addTo(stpLayer);
  
var stpHmnr= L.geoJson(stp, {
    pointToLayer: function(feature,latlng) {
        return L.marker(latlng, {icon: hmnrIcon});
         },    
    filter: function(feature,layer) {
        if (feature.properties.project==proNum) {
    return feature.properties.Result=='HMNR';
            }},      
    onEachFeature : function(feature,layer) {
        
    layer.bindPopup("<b>Test: </b>"+"<p>"+feature.properties.Test+"</p>"
                   +"<p>"+"Result: "+feature.properties.Result+"</p>", customOptions);
    }}).addTo(map).addTo(stpLayer);

var stpPmnr= L.geoJson(stp, {
    pointToLayer: function(feature,latlng) {
        return L.marker(latlng, {icon: pmnrIcon});
         },    
    filter: function(feature,layer) {
        if (feature.properties.project==proNum) {
    return feature.properties.Result=='PMNR';
            }},      
    onEachFeature : function(feature,layer) {
        
    layer.bindPopup("<b>Test: </b>"+"<p>"+feature.properties.Test+"</p>"
                   +"<p>"+"Result: "+feature.properties.Result+"</p>", customOptions);
    }}).addTo(map).addTo(stpLayer);
    
var stpNr= L.geoJson(stp, {
    pointToLayer: function(feature,latlng) {
        return L.marker(latlng, {icon: nrIcon});
         },    
    filter: function(feature,layer) {
        if (feature.properties.project==proNum) {
    return feature.properties.Result=='NR';
            }},      
    onEachFeature : function(feature,layer) {
        
    layer.bindPopup("<b>Test: </b>"+"<p>"+feature.properties.Test+"</p>"
                   +"<p>"+"Result: "+feature.properties.Result+"</p>", customOptions);
    }}).addTo(map).addTo(stpLayer);
    
var stpNe= L.geoJson(stp, {
    pointToLayer: function(feature,latlng) {
        return L.marker(latlng, {icon: neIcon});
         },    
    filter: function(feature,layer) {
        if (feature.properties.project==proNum) {
    return feature.properties.Result=='NE';
            }},      
    onEachFeature : function(feature,layer) {
        
    layer.bindPopup("<b>Test: </b>"+"<p>"+feature.properties.Test+"</p>"
                   +"<p>"+"Result: "+feature.properties.Result+"</p>", customOptions);
    }}).addTo(map).addTo(stpLayer);
    
    });

var vectorLayers = {
            "<b>Area of Potential Effects</b>": apeLayer,
            "<b>Shovel Test Pits</b>": stpLayer,
            "<b>Features</b>": featureLayer,
            "<b>Excavation Units</b>": euLayer,
                    }

var baseMaps = {
            "<b>2020 Aerial</b>": NJ2020,
	        "<b>2015 Aerial</b>": NJ2015,
	        "<b>2012 Aerial</b>": NJ2012,
            "<b>World Imagery</b>": WorldImagery,
            "<b>World Street Map</b>": WorldStreetMap,
            "<b>1977 Tidelands</b>": NJTidelands,
            "<b>1930 Aerial</b>": NJ1930
        }

//JScript for Dropdown Selaection
 var selectDropdown = {
    val1 : '2019270',
    val2 : '2019271'
};
var mySelect = $('#my-dropdown');
$.each(selectDropdown, function(val, text) {
    mySelect.append(
        $('<option></option>').val(val).html(text)
    );
});      

        L.control.layers(baseMaps, vectorLayers, { collapsed:true }).addTo(map);  

       
</script>
    
    
</body>
    
    
</html>
